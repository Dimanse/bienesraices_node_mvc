extends ../layout/app

block styles
    link(rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css")

block contenido

    //- pre= JSON.stringify(propiedad, undefined, 2)

    div(class="py-5")
        h1( id="titulo" class="text-center font-extrabold text-4xl")= propiedad.titulo
        div(class="mt-5 ")
            a(href="#" class="font-bold text-gray-600 text-sm") Categoria: 
                span(class="font-normal")= propiedad.categoria.nombre

        div(class="mt-5 md:flex md:gap-4 md:items-start")
            div(class="md:w-2/3 bg-white shadow rounded-lg border border-solid border-gray-200")
                img(src=`/uploads/${propiedad.imagen}`, alt=`imagen de la propiedad ${propiedad.titulo}`)
                div(class="px-5 py-10 space-y-5")
                    p= propiedad.descripcion

                    h2(class="leading-6 font-bold text-gray-900 text-2xl") Información Propiedad:

                    div(class="grid grid-cols-1 md:grid-cols-2 gap-4")
                        
                        div(class="flex flex-col border-b-2 border-r-2 border-gray-300 p-3 bg-gray-50")
                            p(class="text-gray-600 font-bold text-xs flex ") WC:
                            div(class="flex flex-row items-center justify-between")
                                svg(xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toilet-paper" width="40" height="40" viewBox="0 0 24 24" stroke-width="1.5" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round")
                                    path(stroke="none" d="M0 0h24v24H0z" fill="none")
                                    path(d="M6 10m-3 0a3 7 0 1 0 6 0a3 7 0 1 0 -6 0")
                                    path(d="M21 10c0 -3.866 -1.343 -7 -3 -7")
                                    path(d="M6 3h12")
                                    path(d="M21 10v10l-3 -1l-3 2l-3 -3l-3 2v-10")
                                    path(d="M6 10h.01")


                                span(class="text-gray-800 block text-lg")= propiedad.wc
                    
                        div(class="flex flex-col border-b-2 border-l-2 border-gray-300 p-3 bg-gray-50")
                            p(class="text-gray-600 font-bold text-xs flex ") Habitaciones:
                            div(class="flex flex-row items-center justify-between ")
                                svg(xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-bed-filled" width="40" height="40" viewBox="0 0 24 24" stroke-width="1.5" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round")
                                    path(stroke="none" d="M0 0h24v24H0z" fill="none")
                                    path(d="M3 6a1 1 0 0 1 .993 .883l.007 .117v6h6v-5a1 1 0 0 1 .883 -.993l.117 -.007h8a3 3 0 0 1 2.995 2.824l.005 .176v8a1 1 0 0 1 -1.993 .117l-.007 -.117v-3h-16v3a1 1 0 0 1 -1.993 .117l-.007 -.117v-11a1 1 0 0 1 1 -1z" stroke-width="0" fill="currentColor")
                                    path(d="M7 8a2 2 0 1 1 -1.995 2.15l-.005 -.15l.005 -.15a2 2 0 0 1 1.995 -1.85z" stroke-width="0" fill="currentColor") 
                                span(class="text-gray-800 block text-lg")= propiedad.habitaciones

                        
                        div(class="flex flex-col border-t-2 border-r-2 border-gray-300 p-3 bg-gray-50")
                            p(class="text-gray-600 font-bold text-xs flex ") Estacionamiento:
                            div(class="flex flex-row items-center justify-between")
                                svg(xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-car-garage" width="40" height="40" viewBox="0 0 24 24" stroke-width="1.5" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round")
                                    path(stroke="none" d="M0 0h24v24H0z" fill="none")
                                    path(d="M5 20a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" )
                                    path(d="M15 20a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" )
                                    path(d="M5 20h-2v-6l2 -5h9l4 5h1a2 2 0 0 1 2 2v4h-2m-4 0h-6m-6 -6h15m-6 0v-5" )
                                    path(d="M3 6l9 -4l9 4" )
                                    
                                span(class="text-gray-800 block text-lg")= propiedad.estacionamiento

                        div(class="flex flex-col border-t-2 border-l-2 border-gray-300 p-3 bg-gray-50")
                            p(class="text-gray-600 font-bold text-xs flex ") Precio:
                            div(class="flex flex-row items-center justify-between")
                                svg(xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home-dollar" width="40" height="40" viewBox="0 0 24 24" stroke-width="1.5" stroke="#000000" fill="none" stroke-linecap="round" stroke-linejoin="round")
                                    path(stroke="none" d="M0 0h24v24H0z" fill="none")
                                    path(d="M19 10l-7 -7l-9 9h2v7a2 2 0 0 0 2 2h6" )
                                    path(d="M9 21v-6a2 2 0 0 1 2 -2h2c.387 0 .748 .11 1.054 .3" )
                                    path(d="M21 15h-2.5a1.5 1.5 0 0 0 0 3h1a1.5 1.5 0 0 1 0 3h-2.5" )
                                    path(d="M19 21v1m0 -8v1" )
                                    
                                    
                                span(class="text-gray-800 block font-bold text-lg")= propiedad.precio.nombre

            aside(class="md:w-1/3 bg-white shadow rounded-lg border border-solid border-gray-200 mt-5")
                h3(class="text-center font-bold leading-6 text-gray-900 py-10 text-2xl") Ubicación:
                div(class="h-96 " id="mapa")
                    p(class="hidden" id="lat")= propiedad.lat
                    p(class="hidden" id="lng")= propiedad.lng

                div(class="p-6 bg-white shadow rounded-lg border border-solid border-gray-200  -mt-1.5")
                    p(class="font-bold text-gray-600 text-xs ") Dirección: 
                        span(class="text-gray-800 block text-lg" id="calle")= propiedad.calle
                    
                    if !esVendedor 

                        h3(class="my-10 text-2xl text-gray-900 text-center font-extrabold") Vendedor:
                        if enviado
                            p(class="bg-green-200 border-solid border-2 border-green-700 text-green-500 uppercase text-center text-sm p-2 mb-2 font-bold shadow-xl") Mensaje enviado correctamente
                        else if usuario

                            if errores
                                div(class="max-w-md mx-auto my-10")
                                    each error in errores 
                                        p.bg-red-200.border-solid.border-2.border-red-700.text-red-500.uppercase.text-center.text-sm.p-2.mb-2.font-bold.shadow-xl= error.msg

                            form(method="POST")
                                input(type="hidden", name="_csrf" value=csrfToken)
                                div(class="space-y-5")
                                    label(for="mensaje") Mensaje
                                    textarea(name="mensaje" id="mensaje" class="w-full p-2 border border-gray-300 rounded-lg shadow placeholder-gray-400" placeholder="Envia tu mensaje al vendedor")
                                    input(type="submit", value="Enviar Mensaje" class="text-sm bg-indigo-600 cursor-pointer text-white font-bold uppercsase w-full p-2 rounded ") 
                        else 
                            div(class="flex flex-col items-center justify-center gap-2 ")
                                p(class="text-center") Si quieres contactar al vendedor:
                                a(href="/auth/crear-cuenta" class="text-indigo-600 mb-5") Debes crear una cuenta    
                    

block scripts 
    script(src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js")
    script(src="/js/mostrarMapa.js") 